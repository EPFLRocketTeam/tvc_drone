<launch>

    <rosparam param="/is_simu">false</rosparam>

    <group>
        <rosparam param="navigation/drone_dome">true</rosparam>
        <machine name="gnc_machine" address="raspberrypi.local" user="pi" password="ert2021" timeout="10"
                 env-loader="/home/pi/drone_ws/devel/remote_env_loader.sh"/>
        <!-- <node machine="gnc_machine" name="avionic_bridge" pkg="drone_gnc" type="avionic_bridge_node.py"/> -->
        <include file="$(find drone_gnc)/launch/drone_gnc.launch"/>
    </group>

<!-- local interface -->
    <group>
        <machine name="local" address="localhost"/>
        <include file="$(find drone_simulator_interface)/launch/simulator_interface.launch"/>
        <node machine="local" name="drone_to_rocket_state" pkg="topic_tools" type="transform" args="/drone_state /kalman_rocket_state real_time_simulator/State
              'real_time_simulator.msg.State(twist=m.twist, pose=m.pose, propeller_mass=0)'
              --import real_time_simulator drone_gnc"/>
        <node machine="local" pkg="rosbag" type="record" name="recorder" args="record -a -O $(find drone_utils)/log/log.bag"/>

    </group>

<!--    <include file="$(find drone_utils)/launch/gui.launch"/>-->

<!--    <node name ="benchmark" pkg="drone_utils" type="benchmark.py" output="screen"/>-->

    <!--    <rosparam param="/use_sim_time">true</rosparam>-->

    <!-- transform drone_kalman to rocket state for visualization-->
</launch>


