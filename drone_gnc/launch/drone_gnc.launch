<launch>
    <group ns="rocket">
        <rosparam file="$(find drone_gnc)/config/rocket_parameters.yaml"/>
    </group>

    <group ns="control/mpc">
        <rosparam file="$(find drone_gnc)/config/control_mpc_parameters.yaml"/>
    </group>

    <group ns="guidance/mpc">
        <rosparam file="$(find drone_gnc)/config/guidance_mpc_parameters.yaml"/>
    </group>

<!--    <group ns="filter">-->
<!--        <rosparam file="$(find drone_gnc)/config/filter_parameters.yaml"/>-->
<!--    </group>-->

    <group ns="filter">
        <rosparam file="$(find drone_gnc)/config/optitrack_filter_parameters.yaml"/>
    </group>

    <node name="control" pkg="drone_gnc" type="drone_control" machine="gnc_machine" cwd="node">
        <rosparam param="target_apogee">[0,0,0.5]</rosparam>
    </node>


    <node name="guidance" pkg="drone_gnc" type="drone_guidance" machine="gnc_machine" cwd="node" output="screen">
        <rosparam param="target_apogee">[0,0,0.5]</rosparam>
    </node>

<!--    <node name="low_level_control" pkg="drone_gnc" type="low_level_control_node.py" output="screen"/>-->

    <node name="drone_fsm" pkg="drone_gnc" type="drone_fsm" machine="gnc_machine" cwd="node">
        <rosparam param="initial_state">"Idle"</rosparam>
    </node>

    <node name="navigation" pkg="drone_gnc" type="drone_navigation_optitrack" machine="gnc_machine" cwd="node" output="screen">
        <rosparam param="initial_state">[0,0,0, 0,0,0, 0,0,0,1, 0,0,0, 1.04, 1.005, -0.01, 0.02, 0,0,0, 0,0,0]</rosparam>
        <rosparam param="drone_dome">true</rosparam>
    </node>
</launch>


